import { Cards, Card, Callout, Tabs, Tab } from 'nextra/components'

<div align="center">

# 🚀 MCP Proxy Wrapper

**Add hooks and plugins to any MCP server without changing your code**

<p>
<a href="https://www.npmjs.com/package/mcp-proxy-wrapper" target="_blank" rel="noreferrer"><img src="https://img.shields.io/npm/v/mcp-proxy-wrapper?style=for-the-badge&logo=npm" alt="NPM Version" style={{display: 'inline-block', margin: '0 4px'}} /></a>
<a href="https://github.com/mcp-plugins/mcp-proxy-wrapper" target="_blank" rel="noreferrer"><img src="https://img.shields.io/github/stars/mcp-plugins/mcp-proxy-wrapper?style=for-the-badge&logo=github" alt="GitHub Stars" style={{display: 'inline-block', margin: '0 4px'}} /></a>
<a href="https://github.com/mcp-plugins/mcp-proxy-wrapper/blob/main/LICENSE" target="_blank" rel="noreferrer"><img src="https://img.shields.io/github/license/mcp-plugins/mcp-proxy-wrapper?style=for-the-badge" alt="License" style={{display: 'inline-block', margin: '0 4px'}} /></a>
<a href="https://www.typescriptlang.org/" target="_blank" rel="noreferrer"><img src="https://img.shields.io/badge/TypeScript-Ready-blue?style=for-the-badge&logo=typescript" alt="TypeScript" style={{display: 'inline-block', margin: '0 4px'}} /></a>
</p>

```bash
npm install mcp-proxy-wrapper
```

</div>

A proxy wrapper that adds hooks, plugins, and custom logic to existing MCP servers without modifying the original code.

---

## 🎯 Overview

Add functionality to your existing MCP server:

```typescript
import { wrapWithProxy, LLMSummarizationPlugin } from 'mcp-proxy-wrapper';

// Your existing server - no changes needed
const server = new McpServer({ name: 'My Server', version: '1.0.0' });
server.tool('getData', schema, getData);

// Add plugins and hooks
const plugin = new LLMSummarizationPlugin();
plugin.updateConfig({
  options: {
    provider: 'openai',
    openaiApiKey: process.env.OPENAI_API_KEY
  }
});

const enhanced = await wrapWithProxy(server, {
  plugins: [plugin],
  hooks: {
    beforeToolCall: async (context) => {
      console.log(`🔧 ${context.toolName}`);
      // Add auth, rate limiting, etc.
    }
  }
});
```

**Result**: Your server now has AI summarization, logging, and custom hooks without any code changes.

## ✨ Key Features

- **🔧 Zero Code Changes** - Wrap existing servers instantly
- **🤖 AI Integration** - OpenAI-powered response summarization  
- **🪝 Hook System** - beforeToolCall/afterToolCall with full control
- **🔌 Plugin Architecture** - Reusable, composable functionality
- **🌐 Remote Servers** - Proxy external MCP servers over HTTP/WebSocket
- **🛡️ Authentication & Security** - Auth, rate limiting, access control patterns
- **📊 Comprehensive Tests** - 273 tests covering MCP protocol compatibility

## 🚀 Common Use Cases

<Tabs items={['Authentication', 'AI Enhancement', 'Monitoring', 'Remote Proxy']}>
  <Tab>
    ```typescript
    const secure = await wrapWithProxy(server, {
      hooks: {
        beforeToolCall: async (context) => {
          if (!await validateApiKey(context.args.apiKey)) {
            return { 
              result: { 
                content: [{ type: 'text', text: 'Unauthorized' }], 
                isError: true 
              }
            };
          }
        }
      }
    });
    ```
  </Tab>
  <Tab>
    ```typescript
    const plugin = new LLMSummarizationPlugin();
    plugin.updateConfig({
      options: {
        provider: 'openai',
        openaiApiKey: process.env.OPENAI_API_KEY,
        summarizeTools: ['research', 'analyze']
      }
    });
    
    const intelligent = await wrapWithProxy(server, {
      plugins: [plugin]
    });
    ```
  </Tab>
  <Tab>
    ```typescript
    const monitored = await wrapWithProxy(server, {
      hooks: {
        beforeToolCall: async (context) => {
          console.log(`📊 ${context.toolName} started`);
          context.startTime = Date.now();
        },
        afterToolCall: async (context, result) => {
          const duration = Date.now() - context.startTime;
          console.log(`✅ ${context.toolName} completed in ${duration}ms`);
          return result;
        }
      }
    });
    ```
  </Tab>
  <Tab>
    ```typescript
    // Proxy external servers and add features
    const plugin = new LLMSummarizationPlugin();
    plugin.updateConfig({
      options: {
        provider: 'openai',
        openaiApiKey: process.env.OPENAI_API_KEY
      }
    });
    
    const proxy = await createHttpServerProxy('https://api.example.com/mcp', {
      plugins: [plugin],
      hooks: { /* your custom logic */ }
    });
    ```
  </Tab>
</Tabs>

## 🧪 Technical Details

- **273 passing tests** with real MCP client-server communication
- **Comprehensive error handling** with fallbacks and proper error propagation
- **TypeScript native** with full type safety and IntelliSense
- **MCP SDK v1.6.0+** compatible with any existing server

## 🚀 Quick Navigation

<Cards>
  <Card
    title="🚀 Quick Start"
    href="/getting-started"
  >
    Get up and running with the step-by-step guide.
  </Card>
  
  <Card
    title="🔧 How It Works"
    href="/how-it-works"
  >
    Understand the proxy interception mechanism and plugin execution flow.
  </Card>
  
  <Card
    title="🏗️ Architecture"
    href="/architecture"
  >
    Deep dive into the technical architecture and design patterns.
  </Card>
  
  <Card
    title="🔌 Plugin System"
    href="/plugins"
  >
    Extend your MCP server with powerful plugins for LLM summarization, chat memory, and custom processing.
  </Card>
</Cards>

## ⭐ Key Features

<div style={{display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '1rem', margin: '2rem 0'}}>

<div style={{padding: '1.5rem', border: '1px solid #e5e7eb', borderRadius: '0.5rem'}}>
  <h3>🔌 Plugin Architecture</h3>
  <p>Extensible hook system for <code>beforeToolCall</code> and <code>afterToolCall</code> with zero server modifications.</p>
</div>

<div style={{padding: '1.5rem', border: '1px solid #e5e7eb', borderRadius: '0.5rem'}}>
  <h3>🤖 AI Enhancement Plugins</h3>
  <p>LLM Summarization and Chat Memory plugins included for intelligent tool enhancement.</p>
</div>

<div style={{padding: '1.5rem', border: '1px solid #e5e7eb', borderRadius: '0.5rem'}}>
  <h3>🔐 Authentication & Security</h3>
  <p>Flexible hook system for implementing access control, rate limiting, and user management.</p>
</div>

<div style={{padding: '1.5rem', border: '1px solid #e5e7eb', borderRadius: '0.5rem'}}>
  <h3>📈 Analytics & Monitoring</h3>
  <p>Usage tracking, performance metrics, error reporting, and real-time monitoring capabilities.</p>
</div>

<div style={{padding: '1.5rem', border: '1px solid #e5e7eb', borderRadius: '0.5rem'}}>
  <h3>🌐 Transport Agnostic</h3>
  <p>Works with STDIO, WebSocket, SSE, HTTP, and InMemory transport protocols.</p>
</div>

<div style={{padding: '1.5rem', border: '1px solid #e5e7eb', borderRadius: '0.5rem'}}>
  <h3>🏢 Robust Architecture</h3>
  <p>Comprehensive error handling, logging, and stable API design.</p>
</div>

</div>

## 🔧 How the Proxy Wrapper Works with Tools

<Callout type="default">
The proxy wrapper enhances your MCP server without breaking existing functionality - it's completely backward compatible!
</Callout>

1. **Tools registered BEFORE wrapping**: Remain fully available and functional, but don't get enhanced with hooks/plugins
2. **Tools registered AFTER wrapping**: Get full plugin functionality (summarization, memory, analytics, etc.)
3. **All underlying server functionality**: Completely preserved (resources, prompts, metadata, transport)

The proxy wrapper intercepts the `server.tool()` method registration process, not the tools themselves. So when you call `wrapWithProxy(server)`, it overrides how new tools are registered to add the hook functionality, but existing tools continue to work exactly as before.

> 📖 This behavior is documented in detail in the [Getting Started](/getting-started) guide and [How It Works](/how-it-works) section with examples showing the difference between enhanced and non-enhanced tools.

## 💻 Quick Example

```typescript
import { McpServer } from '@modelcontextprotocol/sdk/server/mcp.js';
import { wrapWithProxy, LLMSummarizationPlugin } from 'mcp-proxy-wrapper';
import { z } from 'zod';

// Create your MCP server
const server = new McpServer({ name: 'My AI Tools', version: '1.0.0' });

// Add AI enhancement plugin
const summarizationPlugin = new LLMSummarizationPlugin();

// Wrap with proxy functionality
const proxiedServer = await wrapWithProxy(server, {
  plugins: [summarizationPlugin]
});

// Register tools as usual - enhancement happens automatically
proxiedServer.tool('ai-analysis', {
  text: z.string()
}, async (args) => {
  return {
    content: [{ type: 'text', text: `Analysis result: ${args.text}` }]
  };
});
```

<div align="center" style={{margin: '3rem 0'}}>

## 🎯 Get Started

<Cards>
  <Card title="📚 Getting Started Guide" href="/getting-started">
    Step-by-step setup guide
  </Card>
  <Card title="🔌 Plugin System" href="/plugins">
    Explore available plugins and create your own
  </Card>
</Cards>

---

<p style={{opacity: 0.7}}>
  <strong>MCP Proxy Wrapper</strong> - Add hooks and plugins to any MCP server
</p>

</div>